---
type: context-core
source: context/methodology/dimensional-modeling.md
version: 1.0.0
updated_at: 2026-01-31
tokens_budget: 800-1000
---

# Kimball 维度建模精简版

## Kimball 四步设计法

| 步骤 | 问题 | 输出 |
|------|------|------|
| **1. 选业务过程** | 建模的业务活动是什么？ | 单个事实表对应一个业务过程 |
| **2. 声明粒度** | 一行代表什么？ | 粒度合同（不可轻易变更） |
| **3. 确定维度** | 分析视角有哪些？ | 时间/客户/产品/地点等维度 |
| **4. 确定事实** | 存储哪些度量？ | 数值字段 + 可加性标注 |

### 粒度声明模板

```
"一行代表一个 {何时发生的} {何物} 的 {何种事件}"
示例: "一行代表一个订单明细（order_detail），包含单个商品的交易信息"
```

---

## 模型选型

| 选型 | 推荐场景 | 原因 |
|------|----------|------|
| **星型模型** | Hive 场景首选 | 分布式 JOIN 成本高，减少连接 |
| 雪花模型 | 存储敏感 + 维度高度规范化 | 规范化减少冗余 |

---

## 一致性维度要点

- **定义**: 跨事实表共享且定义一致的维度
- **作用**: 支持跨主题域钻取、避免口径混乱
- **原则**: 新增事实表前先检查可复用的一致性维度

---

## 特殊维度判断规则

| 场景 | 维度模式 | 判断依据 |
|------|----------|----------|
| 事务 ID 无属性 | 退化维度 | 只有唯一标识作用，无需独立维度表 |
| 多个低基数标志 | 垃圾维度 | 合并 is_xxx 字段到一个维度表 |
| 同维度多外键 | 角色扮演维度 | 如订单的下单/发货/签收日期 |
| M:N 关系 | 桥接表 | 一事实关联多个同类维度 |
| 只记录存在性 | 无事实事实表 | 无度量，COUNT(*) 即度量 |

---

## 检查清单

- [ ] 粒度是否用一句话描述"一行代表什么"
- [ ] Hive 场景是否优先星型模型
- [ ] 一致性维度是否跨事实表共享
- [ ] 事实表是否只存外键和度量（无冗余属性）
- [ ] 特殊维度模式选择是否有依据

---

Source: dimensional-modeling.md | Updated: 2026-01-31
